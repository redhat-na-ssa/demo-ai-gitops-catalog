# Generated by Butane; do not edit
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  annotations:
    bug: https://github.com/NVIDIA/gpu-operator/issues/1598
  labels:
    machineconfiguration.openshift.io/role: worker
    nvidia.com/gpu.present: "true"
  name: 01-gpu-418-22-kludge
spec:
  config:
    ignition:
      version: 3.4.0
    storage:
      files:
        - contents:
            compression: gzip
            source: data:;base64,H4sIAAAAAAAC/5xUTU/kRhC996+oOBxAmrajcIkiJoqUAEJB2dOeRtaqp7vGU3K7q7c/DAj476u2ZwDxsbB7mnH5Vb1X9ar86y/NmlyzVnErRG+z6fDw6FYA/Hf5+d/z0y9nF5eny2ZUockxWNbKNm4kQ6pJzLan1NSa3Ya6XVhqdkmRwyBDdokGbOb3deLBCoChNxRAejg4NBScGhAObp+Q3R8JsQL5PAot3N1BwJSDE0KrBCcn/3z6/+ziHP56BhVKa/RJ7gSNFGltURocSWOUKsqRbR5QDpxdirCEjbIR30lDN44qyKstOpmdDzSSxQ4NLCGFjMJQVAUf8GumgA9VY/aeQ0IjTaARg9TKqzVZSoSFu9I8eJWOf1+UPznhwlD0Vt0suqD8lnRcuO56kVNJuVmMZJArIVYvxq0ttQLdSIHdgC7BElatsGYef2H6uwnZ7e2b1TSxuL8HVcKyMrIf2MR9X16lbUku/jevLsBrSioRmNOU94KzEo6l7gJn/8DySj+79WmF5U5aHNGWcuQ2XImBTZlwpXLiSuyQpdhq1lma0iG7agGPgZCdLgHDup/rT4/73wnffkdJXVhjKwQAwDuoWhtqJ6ByjpNKxE76gBu63unUhur+j1gTN9WMNLhR2SbZkytbVQ3KqQ6LlfVMVmsems7naoJHj1oaCru2MelGG5o6Ludaxl6eP6o3jrOK6SjkVPzB+lL7zfPeckxyQxaj3HB4BNSm+hi1xU7pm5ldZ1OA5SLk3uTH7XzbG7ll7tufWdanBSoRe/ITsTSYUBfbXq5o+iGm1Fdi/lKJeyGutmQR/hQAhmH+3gqAaBE9HP8mDDsU3wIAAP//wXvAHpQFAAA=
          mode: 493
          overwrite: true
          path: /usr/local/bin/nvidia-kludge.sh
    systemd:
      units:
        - contents: |-
            [Unit]
            Description=Nvidia Operator Kludge for 4.18.22

            [Service]
            Type=simple
            ExecStart=/usr/local/bin/nvidia-kludge.sh \
            Restart=always
            RestartSec=10

            [Install]
            WantedBy=multi-user.target
          enabled: true
          name: nvidia-operator-kludge.service
