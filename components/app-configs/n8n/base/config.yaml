---
kind: ConfigMap
apiVersion: v1
metadata:
  name: n8n-env
data:
  PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/node/.n8n/bin
  GENERIC_TIMEZONE: "UTC"
  NODE_ENV: "production"
  N8N_BLOCK_ENV_ACCESS_IN_NODE: "false"
  WEBHOOK_URL: "http://n8n.admin.svc.cluster.local:5678/"
  N8N_EDITOR_BASE_URL: "http://n8n.admin.svc.cluster.local:5678/"
  N8N_PORT: "5678"
  # N8N_PROTOCOL: "http"
  HOME: "/home/user"
  N8N_USER_FOLDER: "/home/user"
  N8N_DIAGNOSTICS_ENABLED: "false"
  N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS: "false"

  DB_SQLITE_POOL_SIZE: "3"
  DB_SQLITE_VACUUM_ON_STARTUP: "true"

  N8N_RUNNERS_ENABLED: "true"
  N8N_RUNNERS_MODE: "external"
  N8N_RUNNERS_BROKER_LISTEN_ADDRESS: "0.0.0.0"
  N8N_NATIVE_PYTHON_RUNNER: "true"
  N8N_RUNNERS_TASK_BROKER_URI: "http://n8n:5679"
  
  # N8N_TEMPLATES_ENABLED: "false"
  # N8N_VERSION_NOTIFICATIONS_ENABLED: "false"
  # N8N_METRICS: "false"

---
kind: Secret
apiVersion: v1
metadata:
  name: n8n-env
stringData:
  notes: |
    # Create the following in this secret for things to work
    N8N_RUNNERS_AUTH_TOKEN: "your-secret-here"
    N8N_BASIC_AUTH_ACTIVE: "true"
    N8N_BASIC_AUTH_USER: "root@localhost.ltd"
    N8N_BASIC_AUTH_PASSWORD: "admin"
type: Opaque
